{"version":3,"sources":["components/Pages/PixiD3/styles.module.scss","components/Pages/PixiD3/PixiD3.js"],"names":["module","exports","chart","data","i","push","Math","cos","PixiD3","_React$Component","_getPrototypeOf2","_this","Object","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_len","arguments","length","args","Array","_key","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","apply","concat","width","height","cellSize","elements","Immutable","updateScale","xScale","d3","domain","d","range","yScale","draw","containerRef","appendChild","pixiApp","view","forEach","idx","renderNewCell","timer","counter","updateAndRedraw","_data$shift","shift","_data$shift2","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","x","slice","graphics","get","delete","stage","removeChild","_d","y","existOne","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__","key","value","_ref","_ref2","PIXI","beginFill","chroma","abs","num","lineStyle","drawRect","set","addChild","antialias","transparent","resolution","stop","_this2","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","styles","ref","React","Component","connect","state","ownProps"],"mappings":"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","file":"static/js/15.fb5ea64d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chart\":\"styles_chart__18X72\"};","/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport * as PIXI from 'pixi.js';\nimport chroma from 'chroma-js';\nimport * as Immutable from 'immutable';\nimport styles from './styles.module.scss';\n\nconst data = [];\nlet i = -10;\ndo {\n    i += 0.1;\n    data.push([i, Math.cos(i)]);\n} while (i < 10);\n\nexport class PixiD3 extends React.Component {\n    width = 500;\n    height = 200;\n    cellSize = 5;\n\n    data = data;\n    elements = new Immutable.Map();\n\n    updateScale = () => {\n        this.xScale = d3\n            .scaleLinear()\n            .domain(d3.extent(this.data, d => d[0]))\n            .range([0 + this.cellSize, this.width - this.cellSize]);\n\n        this.yScale = d3\n            .scaleLinear()\n            .domain(d3.extent(this.data, d => d[1]))\n            .range([0 + this.cellSize, this.height - this.cellSize]);\n    };\n\n    renderNewCell([x, y]) {\n        const graphics = new PIXI.Graphics();\n        graphics.beginFill(chroma(d3.interpolateBlues(Math.abs(y))).num());\n        graphics.lineStyle(1, chroma(d3.interpolateGreys(Math.abs(1 - y))).num());\n        graphics.drawRect(0, 0, this.cellSize, this.cellSize);\n        graphics.x = this.xScale(x);\n        graphics.y = this.yScale(y);\n\n        this.elements = this.elements.set(x, graphics);\n\n        this.pixiApp.stage.addChild(graphics);\n    }\n\n    draw = () => {\n        this.containerRef.appendChild(this.pixiApp.view);\n\n        this.updateScale();\n\n        this.data.forEach((d, idx) => {\n            this.renderNewCell(d);\n        });\n\n        this.timer = d3.interval(counter => {\n            this.updateAndRedraw();\n        }, 10);\n    };\n\n    updateAndRedraw = () => {\n        i += 0.1;\n        const [x, y] = data.shift();\n        data.slice(1);\n\n        const graphics = this.elements.get(x);\n        this.elements = this.elements.delete(x);\n        this.pixiApp.stage.removeChild(graphics);\n\n        data.push([i, Math.cos(i)]);\n\n        this.updateScale();\n\n        data.forEach((d, idx) => {\n            const [x, y] = d;\n\n            const existOne = this.elements.get(x);\n            if (existOne) {\n                existOne.x = this.xScale(x);\n                existOne.y = this.yScale(y);\n            } else {\n                this.renderNewCell(d);\n            }\n        });\n    };\n\n    componentDidMount() {\n        this.pixiApp = new PIXI.Application({\n            width: this.width,\n            height: this.height,\n            antialias: false, // default: false\n            transparent: true, // default: false\n            resolution: 1, // default: 1\n        });\n\n        this.draw();\n    }\n\n    componentWillUnmount() {\n        this.timer.stop();\n    }\n\n    render() {\n        return (\n            <div>\n                <div\n                    className={styles.chart}\n                    ref={i => {\n                        this.containerRef = i;\n                    }}\n                />\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {};\n}\n\nexport default connect(\n    mapStateToProps,\n    {},\n)(PixiD3);\n"],"sourceRoot":""}