{"version":3,"sources":["components/Pages/Hierarchy/styles.module.scss","common/index.js","components/Pages/Hierarchy/Hierarchy.js","../node_modules/clsx/dist/clsx.mjs"],"names":["module","exports","chart","link","node","nodeInternal","nodeLeaf","window","innerWidth","innerHeight","d3","range","Hierarchy","_React$Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","draw","treeData","id","d","name","parentId","parent","svg","containerRef","append","attr","styles","width","height","nodes","size","treemap","nodeEls","selectAll","data","descendants","slice","enter","curve","x","y","clsx","children","on","_","idx","select","transition","ease","text","inherits","createClass","key","value","_this2","react_default","a","createElement","className","root","ref","i","React","Component","connect","state","ownProps","toVal","mix","k","str","push","__webpack_exports__"],"mappings":"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","file":"static/js/14.31a9ceb5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chart\":\"styles_chart__1GnK5\",\"link\":\"styles_link__GS43j\",\"node\":\"styles_node__2ke1l\",\"nodeInternal\":\"styles_nodeInternal__2-9YC\",\"nodeLeaf\":\"styles_nodeLeaf__g9EjJ\"};","import * as d3 from 'd3';\n\nconst protoChart = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    margin: {\n        left: 10,\n        right: 10,\n        top: 10,\n        bottom: 10,\n    },\n};\n\nexport default function chartFactory(domNode, opts = {}, proto = protoChart) {\n    const chart = { ...proto, ...opts };\n\n    chart.svg = d3\n        .select(domNode)\n        .append('svg')\n        .attr('id', chart.id || 'chart')\n        .attr('width', chart.width - chart.margin.right)\n        .attr('height', chart.height - chart.margin.bottom);\n\n    chart.container = chart.svg\n        .append('g')\n        .attr('id', 'container')\n        .attr('transform', `translate(${chart.margin.left}, ${chart.margin.top})`);\n\n    return chart;\n}\n\nexport const colorScale = d3.scaleOrdinal().range(d3.schemeCategory10);\n\nexport const heightValueComparator = (a, b) => b.height - a.height || b.value - a.value;\n\nexport const valueComparator = (a, b) => b.value - a.value;\n\nexport function uniques(data, name) {\n    return data\n        .reduce((uniqueValues, d) => {\n            uniqueValues.push(uniqueValues.indexOf(name(d)) < 0 ? name(d) : undefined);\n\n            return uniqueValues;\n        }, [])\n        .filter(i => i); // Filter by identity\n}\n\nexport function fixateColors(data, key) {\n    colorScale.domain(uniques(data, d => d[key]));\n}\n\nexport const addRoot = (data, itemKey, parentKey, joinValue) => {\n    data.forEach(d => {\n        d[parentKey] = d[parentKey] || joinValue;\n    });\n\n    data.push({\n        [parentKey]: '',\n        [itemKey]: joinValue,\n    });\n\n    return data;\n};\n\nexport const tooltip = () => {};\n\nexport const descendantsDarker = () => {};\n","/* eslint-disable indent,prefer-destructuring,no-unused-vars */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport clsx from 'clsx';\nimport styles from './styles.module.scss';\nimport chartFactory from '../../../common';\n\nexport class Hierarchy extends React.Component {\n    draw = () => {\n        const width = 500;\n        const height = 500;\n\n        const data = [\n            { name: 'Bob', parent: '' },\n            { name: 'Alice', parent: 'Bob' },\n            { name: 'Mike', parent: 'Bob' },\n            { name: 'John', parent: 'Alice' },\n        ];\n\n        const treeData = d3.hierarchy(\n            d3\n                .stratify()\n                .id(d => d.name)\n                .parentId(d => d.parent)(data),\n        );\n\n        window.treeData = treeData;\n\n        const svg = d3\n            .select(this.containerRef)\n            .append('svg')\n            .attr('class', styles.chart)\n            .attr('width', width + 30)\n            .attr('height', height + 30)\n            .append('g')\n            .attr('transform', `translate(15,15)`);\n\n        const treemap = d3.tree().size([height, width]);\n\n        const nodes = treemap(treeData);\n\n        const link = svg\n            .selectAll('.link')\n            .data(nodes.descendants().slice(1))\n            .enter()\n            .append('path')\n            .attr('class', styles.link)\n            .attr('d', d =>\n                d3.line().curve(d3.curveBundle)([\n                    [d.x, d.y],\n                    [d.x, (d.y + d.parent.y) / 2],\n                    [d.parent.x, (d.y + d.parent.y) / 2],\n                    [d.parent.x, d.parent.y],\n                ]),\n            );\n\n        const nodeEls = svg\n            .selectAll(`.${styles.node}`)\n            .data(nodes.descendants())\n            .enter()\n            .append('g')\n\n            .attr('class', d => clsx(styles.node, d.children ? styles.nodeInternal : styles.nodeLeaf))\n            .attr('transform', d => `translate(${d.x},${d.y})`);\n\n        nodeEls\n            .on('mouseover', (_, idx, nodes) => {\n                d3.select(nodes[idx])\n                    .select('circle')\n                    .transition()\n                    .ease(d3.easeCircleOut)\n                    .attr('r', 15);\n\n                d3.select(nodes[idx])\n                    .select('text')\n                    .transition()\n                    .attr('dx', '1.25em');\n            })\n            .on('mouseleave', (_, idx, nodes) => {\n                d3.select(nodes[idx])\n                    .select('circle')\n                    .transition()\n                    .ease(d3.easeBounceOut)\n                    .attr('r', 10);\n\n                d3.select(nodes[idx])\n                    .select('text')\n                    .transition()\n                    .attr('dx', '.75em');\n            });\n\n        nodeEls.append('circle').attr('r', 10);\n\n        nodeEls\n            .append('text')\n            .attr('dx', '.75em')\n            .attr('dy', '.35em')\n            .text(d => d.data.data.name);\n    };\n\n    componentDidMount() {\n        this.draw();\n    }\n\n    render() {\n        return (\n            <div\n                className={styles.root}\n                ref={i => {\n                    this.containerRef = i;\n                }}\n            />\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {};\n}\n\nexport default connect(\n    mapStateToProps,\n    {},\n)(Hierarchy);\n","function toVal(mix) {\n  var k,\n      y,\n      str = '';\n\n  if (mix) {\n    if (typeof mix === 'object') {\n      for (k in mix) {\n        if (mix[k] && (y = toVal(!!mix.push ? mix[k] : k))) {\n          str && (str += ' ');\n          str += y;\n        }\n      }\n    } else if (typeof mix !== 'boolean') {\n      str && (str += ' ');\n      str += mix;\n    }\n  }\n\n  return str;\n}\n\nexport default function () {\n  var i = 0,\n      x,\n      str = '';\n\n  while (i < arguments.length) {\n    if (x = toVal(arguments[i++])) {\n      str && (str += ' ');\n      str += x;\n    }\n  }\n\n  return str;\n}"],"sourceRoot":""}