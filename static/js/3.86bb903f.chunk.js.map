{"version":3,"sources":["components/Pages/DivHistogram/styles.module.scss","components/Pages/DivHistogram/DivHistogram.js"],"names":["module","exports","chart","cubic","label","DivHistogram","_React$Component","_getPrototypeOf2","_this","Object","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_len","arguments","length","args","Array","_key","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","apply","concat","data","range","map","v","Math","random","updateData","push","slice","draw","setTimeout","containerRef","width","clientWidth","yScale","d3","domain","xScale","container","selectAll","styles","exit","remove","enter","append","classed","style","d","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_home_travis_build_avin_d3_sandbox_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","nextProps","nextState","nextContext","window","addEventListener","removeEventListener","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","ref","i","React","Component","connect","state","ownProps"],"mappings":"6EACAA,EAAAC,QAAA,CAAkBC,MAAA,sBAAAC,MAAA,sBAAAC,MAAA,gNCKLC,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAN,GAAA,QAAAO,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAT,EAAAC,OAAAS,EAAA,EAAAT,CAAAE,MAAAJ,EAAAE,OAAAU,EAAA,EAAAV,CAAAJ,IAAAe,KAAAC,MAAAd,EAAA,CAAAI,MAAAW,OAAAP,MACIQ,KAAOC,gBAAM,EAAG,KAAKC,IAAI,SAAAC,GAAC,OAAoB,GAAhBC,KAAKC,WADvCpB,EAGIqB,WAAa,WACTrB,EAAKe,KAAKO,KAAqB,GAAhBH,KAAKC,UACpBpB,EAAKe,KAAOf,EAAKe,KAAKQ,MAAM,GAE5BvB,EAAKwB,OAELC,WAAWzB,EAAKqB,WAAY,KATpCrB,EAYIwB,KAAO,WACH,GAAKxB,EAAK0B,aAAV,CAGA,IAAMC,EAAQ3B,EAAK0B,aAAaE,YAE1BC,EAASC,gBAEVC,OAAO,CAAC,EAAGD,MAAO9B,EAAKe,QACvBC,MAAM,CAAC,IAAK,MAEXgB,EAASF,gBAEVC,OAAO,CAAC,EAAG,IACXf,MAAM,CAAC,EAAGW,EAAQ3B,EAAKe,KAAKT,OAAS,IAEpC2B,EAAYH,SAAU9B,EAAK0B,cAEjCO,EACKC,UADL,IAAApB,OACmBqB,IAAOxC,QACrBoB,KAAKf,EAAKe,KAAM,SAAAG,GAAC,OAAIA,IACrBkB,OACAC,SAELJ,EACKC,UADL,IAAApB,OACmBqB,IAAOxC,QACrBoB,KAAKf,EAAKe,KAAM,SAAAG,GAAC,OAAIA,IACrBoB,QACAC,OAAO,OACPC,QAAQL,IAAOxC,OAAO,GACtB8C,MAAM,SAAU,SAAAC,GAAC,SAAA5B,OAAOe,EAAOa,GAAd,QAGtBT,EAAUC,UAAV,OAAApB,OAA2BqB,IAAOxC,QAAS8C,MAAM,QAAjD,GAAA3B,OAA6DkB,EAAO,GAApE,SA7CRhC,EAAA,OAAAC,OAAA0C,EAAA,EAAA1C,CAAAJ,EAAAC,GAAAG,OAAA2C,EAAA,EAAA3C,CAAAJ,EAAA,EAAAgD,IAAA,wBAAAC,MAAA,SAgD0BC,EAAWC,EAAWC,GACxC,OAAO,IAjDf,CAAAJ,IAAA,oBAAAC,MAAA,WAqDQ3C,KAAKkB,aAEL6B,OAAOC,iBAAiB,SAAUhD,KAAKqB,QAvD/C,CAAAqB,IAAA,uBAAAC,MAAA,WA2DQI,OAAOE,oBAAoB,SAAUjD,KAAKqB,QA3DlD,CAAAqB,IAAA,SAAAC,MAAA,WA8Da,IAAAO,EAAAlD,KACL,OACImD,EAAAC,EAAAC,cAAA,OACIC,UAAWtB,IAAOzC,MAClBgE,IAAK,SAAAC,GACDN,EAAK3B,aAAeiC,SAnExC9D,EAAA,CAAkC+D,IAAMC,WA8EzBC,sBAJf,SAAyBC,EAAOC,GAC5B,MAAO,IAKP,GAFWF,CAGbjE","file":"static/js/3.86bb903f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chart\":\"styles_chart__vGbRD\",\"cubic\":\"styles_cubic__2WZfO\",\"label\":\"styles_label__1IWOm\"};","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport { range } from 'lodash/fp';\nimport styles from './styles.module.scss';\n\nexport class DivHistogram extends React.Component {\n    data = range(0, 200).map(v => Math.random() * 50);\n\n    updateData = () => {\n        this.data.push(Math.random() * 50);\n        this.data = this.data.slice(1);\n\n        this.draw();\n\n        setTimeout(this.updateData, 50);\n    };\n\n    draw = () => {\n        if (!this.containerRef) {\n            return;\n        }\n        const width = this.containerRef.clientWidth;\n\n        const yScale = d3\n            .scaleLinear()\n            .domain([0, d3.max(this.data)])\n            .range([100, 300]);\n\n        const xScale = d3\n            .scaleLinear()\n            .domain([0, 1])\n            .range([0, width / this.data.length - 2]);\n\n        const container = d3.select(this.containerRef);\n\n        container\n            .selectAll(`.${styles.cubic}`)\n            .data(this.data, v => v)\n            .exit()\n            .remove();\n\n        container\n            .selectAll(`.${styles.cubic}`)\n            .data(this.data, v => v)\n            .enter()\n            .append('div')\n            .classed(styles.cubic, true)\n            .style('height', d => `${yScale(d)}px`);\n\n        // Навешиваем ширину отдельно - это нужно для ресайза окна\n        container.selectAll(`div.${styles.cubic}`).style('width', `${xScale(1)}px`);\n    };\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        return false;\n    }\n\n    componentDidMount() {\n        this.updateData();\n\n        window.addEventListener('resize', this.draw);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.draw);\n    }\n\n    render() {\n        return (\n            <div\n                className={styles.chart}\n                ref={i => {\n                    this.containerRef = i;\n                }}\n            />\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n    return {};\n}\n\nexport default connect(\n    mapStateToProps,\n    {},\n)(DivHistogram);\n"],"sourceRoot":""}