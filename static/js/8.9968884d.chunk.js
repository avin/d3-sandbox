(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{215:function(e,t,n){e.exports={root:"styles_root__2LsGm",mainSvg:"styles_mainSvg__3fS5G",cell:"styles_cell__368Sr",controls:"styles_controls__1NTIZ",colorButton:"styles_colorButton__17HZt",activeColorButton:"styles_activeColorButton__SXiBN"}},373:function(e,t,n){"use strict";n.r(t);var a=n(14),l=n(57),r=n.n(l),i=n(60),c=n(13),o=n(8),s=n(9),u=n(11),d=n(10),h=n(12),f=n(1),m=n.n(f),v=n(19),g=n(18),C=n(176),p=n.n(C),b=n(105),w=n.n(b),E=n(52),S=n(215),y=n.n(S),k=function(e){return e[Math.floor(Math.random()*e.length)]},R=function(){for(var e=[],t=-1;t<=1;++t)for(var n=-1;n<=1;++n)0===n&&0===t||e.push([t,n]);return e}(),j=function(e){var t=e.matrix,n=e.y,a=e.x,l=e.width,r=e.height,i=0,o=[];return R.forEach(function(e){var s=Object(c.a)(e,2),u=s[0],d=s[1],h=n+u,f=a+d;-1===h&&(h=r-1),h===r&&(h=0),-1===f&&(f=l-1),f===l&&(f=0);var m=w()(t,[h,f]);m&&(i+=1,o.push(m))}),[i,o]},O=n(217),_=n.n(O),x=n(239),T=n.n(x);function D(e){var t=e.length;if(!t)throw new Error("no colors??");switch(t){case 1:return e[0];case 2:var n=_()(T()(0,2));return"#"+e[n[0]].slice(1,4)+e[n[1]].slice(4,7);case 3:var a=_()(T()(0,3));return"#"+e[a[0]].slice(1,3)+e[a[1]].slice(3,5)+e[a[2]].slice(5,7);case 4:var l=_()(T()(0,4));return"#"+e[l[0]].slice(1,3)+e[l[1]].slice(3,5)+e[l[2]].slice(5,6)+e[l[3]].slice(6,7);case 5:var r=_()(T()(0,5));return"#"+e[r[0]].slice(1,3)+e[r[1]].slice(3,4)+e[r[4]].slice(4,5)+e[r[2]].slice(5,6)+e[r[3]].slice(6,7);default:var i=_()(T()(0,6));return"#"+e[i[0]].slice(1,2)+e[i[5]].slice(2,3)+e[i[1]].slice(3,4)+e[i[4]].slice(4,5)+e[i[2]].slice(5,6)+e[i[3]].slice(6,7)}}n.d(t,"Life",function(){return z});var N={RED:"#f55656",GREEN:"#15b371",BLUE:"#2b95d6"},z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var l=arguments.length,s=new Array(l),h=0;h<l;h++)s[h]=arguments[h];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={running:!1,animate:!0,newCellFrom:3,newCellTo:3,liveCellFrom:2,liveCellTo:3,activeColor:N.RED},n.cells=[],n.fieldWidth=51,n.fieldHeight=51,n.cellSize=5,n.tickTimerId=null,n.drawing=null,n.drawCell=function(){var e=n.state.activeColor,t=n.svg.node().getBoundingClientRect(),a=g.event.pageX-t.left,l=g.event.pageY-t.top,r=Math.floor(a/n.cellSize),i=Math.floor(l/n.cellSize);0===n.drawing?n.cells.find(function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return r===a&&i===n})||n.cells.push([i,r,e]):2===n.drawing&&(n.cells=n.cells.filter(function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return!(n===i&&a===r)})),n.reDraw(!0)},n.prepareSvg=function(){n.svg=g.select(n.containerRef).append("svg").attr("class",y.a.mainSvg).attr("width",n.fieldWidth*n.cellSize).attr("height",n.fieldHeight*n.cellSize),n.svg.on("mousedown",function(){n.drawing=g.event.button,n.drawCell()}).on("mousemove",function(e){null!==n.drawing&&n.drawCell()}).on("mouseleave",function(e){n.drawing=null}).on("mouseup",function(e){n.drawing=null}).on("contextmenu",function(e){g.event.preventDefault(),n.drawing=!1})},n.reDraw=function(e){return new Promise(function(t,a){var l=n.svg.selectAll(".".concat(y.a.cell)).data(n.cells,function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return"".concat(n,"_").concat(a)});l.enter().append("rect").merge(l).call(function(e){e.attr("class",y.a.cell).attr("x",function(e){return e[1]*n.cellSize}).attr("y",function(e){return e[0]*n.cellSize}).attr("width",n.cellSize).attr("height",n.cellSize).attr("fill",function(e){return e[2]})});var r=l.exit();e?(r.remove(),t()):n.state.animate?(r.attr("opacity",.9).attr("fill","#bfccd6").transition().duration(150).attr("opacity",0).remove(),n.timerId&&clearTimeout(n.timerId),n.timerId=setTimeout(t,200)):(r.remove(),n.timerId&&clearTimeout(n.timerId),n.timerId=setTimeout(t,10))})},n.tick=Object(i.a)(r.a.mark(function e(){var t,a,l,i,o,s,u,d,h;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.busy){e.next=2;break}return e.abrupt("return");case 2:return t=n.state,a=t.newCellFrom,l=t.newCellTo,i=t.liveCellFrom,o=t.liveCellTo,n.busy=!0,s=[],u=[],d=[],h=[],n.cells.forEach(function(e){var t=Object(c.a)(e,3),n=t[0],a=t[1],l=t[2];p()(u,[n,a],l)}),n.cells.forEach(function(e){var t=Object(c.a)(e,2),a=t[0],l=t[1];R.forEach(function(e){var t=Object(c.a)(e,2),r=t[0],i=t[1],o=a+r,h=l+i;-1===o&&(o=n.fieldHeight-1),o===n.fieldHeight&&(o=0),-1===h&&(h=n.fieldWidth-1),h===n.fieldWidth&&(h=0),w()(u,[o,h])||w()(d,[o,h])||(s.push([o,h]),p()(d,[o,h],1))})}),n.cells.forEach(function(e){var t=Object(c.a)(e,3),a=t[0],l=t[1],r=t[2],s=j({matrix:u,y:a,x:l,width:n.fieldWidth,height:n.fieldHeight}),d=Object(c.a)(s,1)[0];d>=i&&d<=o&&h.push([a,l,r])}),s.forEach(function(e){var t=Object(c.a)(e,2),r=t[0],i=t[1],o=j({matrix:u,y:r,x:i,width:n.fieldWidth,height:n.fieldHeight}),s=Object(c.a)(o,2),d=s[0],f=s[1];d>=a&&d<=l&&h.push([r,i,D(f)])}),n.cells=h,e.next=15,n.reDraw();case 15:n.busy=!1,n.state.running&&n.tick();case 17:case"end":return e.stop()}},e,this)})),n.handleStart=function(){n.setState({running:!0},function(){n.tick()})},n.handleStop=function(){n.state.running&&n.setState({running:!1})},n.handleRandomize=function(){n.cells=[];for(var e=0;e<n.fieldHeight;++e)for(var t=0;t<n.fieldWidth;++t)Math.random()>.8&&n.cells.push([e,t,k([N.RED,N.GREEN,N.BLUE])]);n.reDraw(!0)},n.handleClean=function(){n.cells=[],n.reDraw(!0)},n.handleDrawCross=function(){var e=Math.floor(n.fieldHeight/2),t=Math.floor(n.fieldWidth/2);n.cells=[[e+1,t,N.RED],[e-1,t,N.RED],[e,t+1,N.GREEN],[e,t-1,N.GREEN]],n.reDraw(!0)},n.handleChangeAnimate=function(){n.setState(function(e){return{animate:!e.animate}})},n.handleChangeRule=function(e){var t=e.currentTarget.name;n.setState(Object(a.a)({},t,Number(e.currentTarget.value)||0))},n.handleSelectColor=function(e){var t=e.currentTarget.dataset.color;n.setState({activeColor:t})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.prepareSvg(),this.handleRandomize()}},{key:"componentWillUnmount",value:function(){this.handleStop()}},{key:"render",value:function(){var e=this,t=this.state,n=t.running,l=t.animate,r=t.activeColor,i=t.newCellFrom,c=t.newCellTo,o=t.liveCellFrom,s=t.liveCellTo;return m.a.createElement("div",{className:y.a.root},m.a.createElement("div",{ref:function(t){e.containerRef=t}}),m.a.createElement("div",{className:y.a.controls},m.a.createElement("button",{onClick:this.handleStart,disabled:n},"Start"),m.a.createElement("button",{onClick:this.handleStop,disabled:!n},"Stop"),m.a.createElement("button",{onClick:this.handleRandomize},"Randomize"),m.a.createElement("button",{onClick:this.handleClean},"Clean"),m.a.createElement("button",{onClick:this.handleDrawCross},"Draw center cross"),m.a.createElement("button",{onClick:this.tick},"Tick")),m.a.createElement("div",{className:y.a.controls},m.a.createElement("input",{type:"checkbox",id:"animate",checked:l,onChange:this.handleChangeAnimate}),m.a.createElement("label",{htmlFor:"animate"},"Animate destruction")),m.a.createElement("div",{className:y.a.controls},"NewCell:\xa0 >=",m.a.createElement("input",{type:"text",name:"newCellFrom",onChange:this.handleChangeRule,value:i,disabled:n}),"\xa0 <=",m.a.createElement("input",{type:"text",name:"newCellTo",onChange:this.handleChangeRule,value:c,disabled:n})),m.a.createElement("div",{className:y.a.controls},"LiveCell:\xa0 >=",m.a.createElement("input",{type:"text",name:"liveCellFrom",onChange:this.handleChangeRule,value:o,disabled:n}),"\xa0 <=",m.a.createElement("input",{type:"text",name:"liveCellTo",onChange:this.handleChangeRule,value:s,disabled:n})),m.a.createElement("div",{className:y.a.controls},[N.RED,N.GREEN,N.BLUE].map(function(t){return m.a.createElement("div",{key:t,"data-color":t,onClick:e.handleSelectColor,style:{backgroundColor:t},className:Object(E.a)(y.a.colorButton,Object(a.a)({},y.a.activeColorButton,r===t))})})))}}]),t}(m.a.Component);z.defaultProps={width:500,height:500};t.default=Object(v.b)(function(e,t){return{}},{})(z)}}]);
//# sourceMappingURL=8.9968884d.chunk.js.map